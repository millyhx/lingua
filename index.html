<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lingua</title>
  <link href="https://fonts.googleapis.com/css2?family=Tinos:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            tinos: ['Tinos', 'serif']
          }
        }
      },
      plugins: [
        function ({ addBase, theme }) {
          addBase({
            body: { backgroundColor: theme('colors.gray.900'), color: theme('colors.white') }
          });
        }
      ]
    }
  </script>
  <link href="https://cdn.jsdelivr.net/npm/daisyui@3.9.0/dist/full.css" rel="stylesheet" />
</head>

<body class="dark">
  <!-- Landing Page -->
  <div id="landing" class="min-h-screen flex flex-col items-center justify-center text-center">
    <h1 class="text-5xl font-bold mb-4 tracking-wide font-tinos">Lingua</h1>
    <p class="mb-6 text-lg text-gray-300 max-w-md">A sleek language dashboard to help you stay connected wherever you go.</p>
    <p class="mb-4 text-lg">Select a country to begin:</p>
    <div class="flex space-x-4">
      <button onclick="selectCountry('hungary')" class="btn btn-primary">Hungary</button>
      <button onclick="selectCountry('turkey')" class="btn btn-primary">Turkey</button>
    </div>
  </div>

  <!-- Dashboard -->
  <div id="dashboard" class="hidden p-4">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-3xl font-bold tracking-wide font-tinos">Lingua</h2>
      <select id="countrySelector" class="select select-bordered w-40" onchange="changeCountry(this.value)">
        <option value="hungary">Hungary</option>
        <option value="turkey">Turkey</option>
      </select>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
      <div class="card bg-base-200 p-4 text-center flex items-center justify-center">
        <div id="time" class="text-3xl font-mono w-full text-center"></div>
      </div>
      <div class="card bg-base-200 p-4">
        <h3 class="text-xl font-semibold">Weather</h3>
        <div id="weather" class="text-lg mt-2">Loading...</div>
      </div>
    </div>

    <div class="card bg-base-200 p-4 mb-4">
      <h3 class="text-xl font-semibold">Common Phrases</h3>
      <ul id="phrases" class="list-disc ml-4 mt-2"></ul>
    </div>

    <div class="card bg-secondary text-white p-4 text-center cursor-pointer mb-4" onclick="openModal('translateModal')">
      <div class="text-lg py-6">ðŸˆ¯ Translate</div>
    </div>

    <div class="card bg-base-200 p-4 mb-4">
      <h3 class="text-xl font-semibold">National Currency</h3>
      <div id="currencyInfo" class="text-lg mt-2"></div>
    </div>

    <div class="card bg-accent text-white p-4 text-center cursor-pointer" onclick="openModal('currencyModal')">
      <div class="text-lg py-6">ðŸ’± Currency</div>
    </div>
  </div>

  <!-- Translate Modal -->
  <dialog id="translateModal" class="modal">
    <form method="dialog" class="modal-box bg-base-200">
      <button onclick="closeModal('translateModal')" class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">âœ•</button>
      <h3 class="font-bold text-lg mb-2">Translate</h3>
      <input id="translateInput" type="text" placeholder="Enter text" class="input input-bordered w-full mb-2" />
      <button onclick="translateText()" type="button" class="btn btn-primary w-full">Translate</button>
      <div id="translationResult" class="mt-2"></div>
    </form>
  </dialog>

  <!-- Currency Modal -->
  <dialog id="currencyModal" class="modal">
    <form method="dialog" class="modal-box bg-base-200">
      <button onclick="closeModal('currencyModal')" class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">âœ•</button>
      <h3 class="font-bold text-lg mb-2">Currency Converter</h3>
      <div class="grid grid-cols-2 gap-2 mb-2">
        <select id="fromCurrency" class="select select-bordered w-full">
          <option value="HUF">Hungarian Forint (HUF)</option>
          <option value="TRY">Turkish Lira (TRY)</option>
          <option value="USD">US Dollar (USD)</option>
          <option value="EUR">Euro (EUR)</option>
          <option value="GBP">British Pound (GBP)</option>
        </select>
        <select id="toCurrency" class="select select-bordered w-full">
          <option value="USD">US Dollar (USD)</option>
          <option value="HUF">Hungarian Forint (HUF)</option>
          <option value="TRY">Turkish Lira (TRY)</option>
          <option value="EUR">Euro (EUR)</option>
          <option value="GBP">British Pound (GBP)</option>
        </select>
      </div>
      <input id="amount" type="number" placeholder="Amount" class="input input-bordered w-full mb-2" />
      <button onclick="convertCurrency()" type="button" class="btn btn-primary w-full">Convert</button>
      <div id="currencyResult" class="mt-2"></div>
    </form>
  </dialog>

  <script>
    let selectedCountry = '';

    const commonPhrases = {
      hungary: ['Hello - Szia', 'Thank you - KÃ¶szÃ¶nÃ¶m', 'Goodbye - ViszlÃ¡t'],
      turkey: ['Hello - Merhaba', 'Thank you - TeÅŸekkÃ¼r ederim', 'Goodbye - HoÅŸÃ§akal']
    };

    const weatherCities = {
      hungary: 'Budapest',
      turkey: 'Istanbul'
    };

    const currencies = {
      hungary: 'Hungarian Forint (HUF)',
      turkey: 'Turkish Lira (TRY)'
    };

    function selectCountry(country) {
      selectedCountry = country;
      document.getElementById('landing').classList.add('hidden');
      document.getElementById('dashboard').classList.remove('hidden');
      document.getElementById('countrySelector').value = country;
      loadDashboard();
    }

    function changeCountry(country) {
  selectedCountry = country;
  document.getElementById('countrySelector').value = country;
  loadDashboard();
  showPopup(`Country changed to ${country.charAt(0).toUpperCase() + country.slice(1)}`);
}

    function loadDashboard() {
      document.getElementById('phrases').innerHTML = commonPhrases[selectedCountry]
        .map(phrase => `<li>${phrase}</li>`).join('');
      document.getElementById('currencyInfo').textContent = currencies[selectedCountry];
      updateTime();
      loadWeather();
    }

    function updateTime() {
      const now = new Date().toLocaleTimeString('en-US', {
        timeZone: selectedCountry === 'hungary' ? 'Europe/Budapest' : 'Europe/Istanbul',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
      });
      document.getElementById('time').textContent = now;
      setTimeout(updateTime, 1000);
    }

    async function loadWeather() {
      const city = weatherCities[selectedCountry];
      const apiKey = 'f2ad63da9541413d85c192518250907'; // Replace with your WeatherAPI.com key

      try {
        const response = await fetch(`https://api.weatherapi.com/v1/current.json?key=${apiKey}&q=${city}`);
        const data = await response.json();

        if (data && data.current) {
          const condition = data.current.condition.text;
const temp = data.current.temp_c;
const icon = data.current.condition.icon;
document.getElementById('weather').innerHTML = `<img src="https:${icon}" alt="weather icon" class="inline-block w-6 h-6 mr-2 align-middle" /> ${condition}, ${temp}Â°C`;
        } else {
          document.getElementById('weather').textContent = 'Weather data unavailable';
        }
      } catch (error) {
        console.error('Weather API error:', error);
        document.getElementById('weather').textContent = 'Weather data unavailable';
      }
    }

    async function convertCurrency() {
      const amount = parseFloat(document.getElementById('amount').value);
      const from = document.getElementById('fromCurrency').value;
      const to = document.getElementById('toCurrency').value;

      if (isNaN(amount) || !from || !to) return;

      try {
        const response = await fetch(`https://api.exchangerate.host/convert?from=${from}&to=${to}&amount=${amount}&places=2`);
        const data = await response.json();

        if (data.result !== undefined) {
          document.getElementById('currencyResult').textContent = `${amount} ${from} â‰ˆ ${data.result} ${to}`;
        } else {
          document.getElementById('currencyResult').textContent = 'Conversion failed: invalid response';
        }
      } catch (error) {
        document.getElementById('currencyResult').textContent = 'Conversion error: network issue';
      }
    }

    async function translateText() {
      const input = document.getElementById('translateInput').value;
      const resultEl = document.getElementById('translationResult');

      if (!input.trim()) {
        resultEl.textContent = 'Please enter some text.';
        return;
      }

      const targetLang = selectedCountry === 'hungary' ? 'HU' : 'TR';
      const encodedText = encodeURIComponent(input);

      try {
        const response = await fetch(`https://api.mymemory.translated.net/get?q=${encodedText}&langpair=en|${targetLang}`);
        const data = await response.json();

        if (data && data.responseData && data.responseData.translatedText) {
          resultEl.textContent = `Translation: ${data.responseData.translatedText}`;
        } else {
          resultEl.textContent = 'Translation failed. Please try again.';
        }
      } catch (error) {
        console.error('Translation error:', error);
        resultEl.textContent = 'Translation failed. Please try again.';
      }
    }

    function openModal(id) {
      document.getElementById(id).showModal();
    }

    function closeModal(id) {
  document.getElementById(id).close();
}

function showPopup(message) {
  const popup = document.getElementById('popupMessage');
  popup.textContent = message;
  popup.classList.remove('hidden');
  setTimeout(() => popup.classList.add('hidden'), 3000);
}
  </script>
  <!-- Popup Notification -->
  <div id="popupMessage" class="fixed bottom-4 right-4 bg-green-600 text-white px-4 py-2 rounded shadow-md hidden z-50"></div>

</body>

</html>
