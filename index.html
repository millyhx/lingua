<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lingua</title>
  <link href="https://fonts.googleapis.com/css2?family=Tinos:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            tinos: ['Tinos', 'serif']
          }
        }
      },
      plugins: [
        function ({ addBase, theme }) {
          addBase({
            body: { backgroundColor: theme('colors.gray.900'), color: theme('colors.white') }
          });
        }
      ]
    }
  </script>
  <link href="https://cdn.jsdelivr.net/npm/daisyui@3.9.0/dist/full.css" rel="stylesheet" />
</head>

<body class="dark">
  <!-- Landing Page -->
  <div id="landing" class="min-h-screen flex flex-col items-center justify-center text-center">
    <h1 class="text-5xl font-bold mb-4 tracking-wide font-tinos">Lingua</h1>
    <p class="mb-6 text-lg text-gray-300 max-w-md">A sleek language dashboard to help you stay connected wherever you go.</p>
    <p class="mb-4 text-lg">Select a country to begin:</p>
    <div class="flex space-x-4">
      <button onclick="selectCountry('hungary')" class="btn btn-primary">Hungary</button>
      <button onclick="selectCountry('turkey')" class="btn btn-primary">Turkey</button>
    </div>
  </div>

  <!-- Dashboard -->
  <div id="dashboard" class="hidden p-4">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-3xl font-bold tracking-wide font-tinos">Lingua</h2>
      <select id="countrySelector" class="select select-bordered w-40" onchange="changeCountry(this.value)">
        <option value="hungary">Hungary</option>
        <option value="turkey">Turkey</option>
      </select>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
      <div class="card bg-base-200 p-4 text-center flex items-center justify-center">
        <div id="time" class="text-3xl font-mono w-full text-center"></div>
      </div>
      <div class="card bg-base-200 p-4">
        <h3 class="text-xl font-semibold">Weather</h3>
        <div id="weather" class="text-lg mt-2">Loading...</div>
      </div>
      <div class="card bg-base-200 p-4">
        <h3 class="text-xl font-semibold">Common Phrases</h3>
        <ul id="phrases" class="list-disc ml-4 mt-2"></ul>
      </div>
      <div class="card bg-base-200 p-4">
        <h3 class="text-xl font-semibold">Currency Info</h3>
        <div id="currencyInfo" class="text-lg mt-2"></div>
      </div>
      <div class="card bg-secondary text-white p-4 text-center cursor-pointer" onclick="openModal('translateModal')">
        <div class="text-lg py-6">ðŸˆ¯ Translate</div>
      </div>
      <div class="card bg-accent text-white p-4 text-center cursor-pointer" onclick="openModal('currencyModal')">
        <div class="text-lg py-6">ðŸ’± Currency</div>
      </div>
    </div>
  </div>

  <!-- Translate Modal -->
  <dialog id="translateModal" class="modal">
    <form method="dialog" class="modal-box bg-base-200">
      <button onclick="closeModal('translateModal')" class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">âœ•</button>
      <h3 class="font-bold text-lg mb-2">Translate</h3>
      <input id="translateInput" type="text" placeholder="Enter text" class="input input-bordered w-full mb-2" />
      <button onclick="translateText()" type="button" class="btn btn-primary w-full">Translate</button>
      <div id="translationResult" class="mt-2"></div>
    </form>
  </dialog>

  <!-- Currency Modal -->
  <dialog id="currencyModal" class="modal">
    <form method="dialog" class="modal-box bg-base-200">
      <button onclick="closeModal('currencyModal')" class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">âœ•</button>
      <h3 class="font-bold text-lg mb-2">Currency Converter</h3>
      <div class="grid grid-cols-2 gap-2 mb-2">
        <select id="fromCurrency" class="select select-bordered w-full"></select>
        <select id="toCurrency" class="select select-bordered w-full"></select>
      </div>
      <input id="amount" type="number" placeholder="Amount" class="input input-bordered w-full mb-2" />
      <button onclick="convertCurrency()" type="button" class="btn btn-primary w-full">Convert</button>
      <div id="currencyResult" class="mt-2"></div>
    </form>
  </dialog>

  <script>
    let selectedCountry = '';

    const currencyOptions = {
      HUF: 'Hungarian Forint (HUF)',
      TRY: 'Turkish Lira (TRY)',
      USD: 'US Dollar (USD)',
      EUR: 'Euro (EUR)',
      GBP: 'British Pound (GBP)'
    };

    const commonPhrases = {
      hungary: ['Hello - Szia', 'Thank you - KÃ¶szÃ¶nÃ¶m', 'Goodbye - ViszlÃ¡t'],
      turkey: ['Hello - Merhaba', 'Thank you - TeÅŸekkÃ¼r ederim', 'Goodbye - HoÅŸÃ§akal']
    };

    const weatherCities = {
      hungary: 'Budapest',
      turkey: 'Istanbul'
    };

    const currencies = {
      hungary: 'Hungarian Forint (HUF)',
      turkey: 'Turkish Lira (TRY)'
    };

    function populateCurrencyDropdowns() {
      const from = document.getElementById('fromCurrency');
      const to = document.getElementById('toCurrency');
      from.innerHTML = '';
      to.innerHTML = '';
      Object.keys(currencyOptions).forEach(code => {
        const option1 = document.createElement('option');
        option1.value = code;
        option1.textContent = currencyOptions[code];
        const option2 = option1.cloneNode(true);
        from.appendChild(option1);
        to.appendChild(option2);
      });
    }

    function autoSelectCurrency() {
      const from = document.getElementById('fromCurrency');
      const to = document.getElementById('toCurrency');
      from.value = selectedCountry === 'hungary' ? 'HUF' : 'TRY';
      to.value = 'USD';
    }

    function selectCountry(country) {
      selectedCountry = country;
      document.getElementById('landing').classList.add('hidden');
      document.getElementById('dashboard').classList.remove('hidden');
      document.getElementById('countrySelector').value = country;
      loadDashboard();
    }

    function changeCountry(country) {
      selectedCountry = country;
      loadDashboard();
    }

    function loadDashboard() {
      document.getElementById('phrases').innerHTML = commonPhrases[selectedCountry]
        .map(phrase => `<li>${phrase}</li>`).join('');
      document.getElementById('currencyInfo').textContent = currencies[selectedCountry];
      updateTime();
      loadWeather();
      populateCurrencyDropdowns();
      autoSelectCurrency();
    }

    function updateTime() {
      const now = new Date().toLocaleTimeString('en-US', {
        timeZone: selectedCountry === 'hungary' ? 'Europe/Budapest' : 'Europe/Istanbul',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
      });
      document.getElementById('time').textContent = now;
      setTimeout(updateTime, 1000);
    }

    async function loadWeather() {
      const city = weatherCities[selectedCountry];
      const apiKey = 'YOUR_OPENWEATHERMAP_API_KEY';
      const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric&appid=${apiKey}`);
      const data = await response.json();
      if (data.main) {
        document.getElementById('weather').innerHTML = `${data.weather[0].description}, ${data.main.temp}Â°C`;
      } else {
        document.getElementById('weather').textContent = 'Weather data unavailable';
      }
    }

    function translateText() {
      const text = document.getElementById('translateInput').value;
      document.getElementById('translationResult').textContent = `"${text}" translated in ${selectedCountry}`;
    }

    async function convertCurrency() {
      const amount = parseFloat(document.getElementById('amount').value);
      const from = document.getElementById('fromCurrency').value;
      const to = document.getElementById('toCurrency').value;

      if (isNaN(amount) || !from || !to) return;

      try {
        const response = await fetch(`https://api.exchangerate.host/convert?from=${from}&to=${to}&amount=${amount}`);
        const data = await response.json();

        if (data.result !== undefined) {
          document.getElementById('currencyResult').textContent = `${amount} ${from} â‰ˆ ${data.result.toFixed(2)} ${to}`;
        } else {
          document.getElementById('currencyResult').textContent = 'Conversion failed.';
        }
      } catch (error) {
        document.getElementById('currencyResult').textContent = 'Error fetching conversion data.';
      }
    }

    function openModal(id) {
      document.getElementById(id).showModal();
    }

    function closeModal(id) {
      document.getElementById(id).close();
    }
  </script>
</body>

</html>
