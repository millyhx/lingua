<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lingua</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="/path/to/flag-icon.png" type="image/png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Gloock&display=swap" rel="stylesheet">
</head>
<body>
  <div class="landing">
    <h1 class="titles">Lingua</h1>
    <select id="country-select">
      <option value="hu">ðŸ‡­ðŸ‡º Hungary</option>
      <option value="tr">ðŸ‡¹ðŸ‡· Turkey</option>
      <!-- Add more countries here -->
    </select>
    <button onclick="enterDashboard()">Confirm</button>
  </div>

  <div class="container" id="dashboard">
    <div class="header">
      <div class="title">Lingua Dashboard</div>
      <button class="theme-toggle" onclick="toggleTheme()">Toggle Theme</button>
    </div>
    <div class="dashboard">
      <div class="card" id="time-card">
        <h3>Local Time</h3>
        <p id="local-time">Loading...</p>
      </div>
      <div class="card" id="currency-card">
        <h3>Currency Converter</h3>
        <input type="number" id="amount" placeholder="Amount in USD">
        <button onclick="convertCurrency()">Convert</button>
        <p id="converted-amount"></p>
      </div>
      <div class="card" id="weather-card">
        <h3>Weather</h3>
        <p id="weather-info">Loading...</p>
      </div>
      <div class="card" id="translate-card">
        <h3>Translator</h3>
        <textarea id="text-to-translate" placeholder="Enter text..."></textarea>
        <button onclick="translateText()">Translate</button>
        <p id="translation-result"></p>
      </div>
      <div class="card" id="phrases-card">
        <h3>Common Phrases</h3>
        <ul id="phrase-list">
          <li>Loading...</li>
        </ul>
      </div>
      <div class="card" id="emergency-card">
        <h3>Emergency Info</h3>
        <p>Police: 112<br>Ambulance: 112<br>Fire: 112</p>
      </div>
    </div>
  </div>

  <script>
    const apiKey = 'YOUR_API_KEY'; // Replace with real API keys where needed

    function enterDashboard() {
      document.querySelector('.landing').style.display = 'none';
      document.getElementById('dashboard').style.display = 'block';
      fetchAllData();
    }

    function toggleTheme() {
      document.body.classList.toggle('dark');
    }

    async function fetchAllData() {
      fetchTime();
      fetchWeather();
      fetchPhrases();
    }

    function fetchTime() {
      const now = new Date().toLocaleTimeString();
      document.getElementById('local-time').textContent = now;
      setInterval(() => {
        document.getElementById('local-time').textContent = new Date().toLocaleTimeString();
      }, 60000);
    }

    async function convertCurrency() {
      const amount = document.getElementById('amount').value;
      const response = await fetch('https://api.exchangerate-api.com/v4/latest/USD');
      const data = await response.json();
      const selected = document.getElementById('country-select').value;
      let currencyCode = selected === 'tr' ? 'TRY' : 'HUF';
      const result = (amount * data.rates[currencyCode]).toFixed(2);
      document.getElementById('converted-amount').textContent = `${result} ${currencyCode}`;
    }

    async function fetchWeather() {
      const city = document.getElementById('country-select').value === 'tr' ? 'Istanbul' : 'Budapest';
      const response = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=47.4979&longitude=19.0402&current_weather=true`);
      const data = await response.json();
      document.getElementById('weather-info').textContent = `${data.current_weather.temperature}Â°C, ${data.current_weather.weathercode}`;
    }

    async function translateText() {
      const text = document.getElementById('text-to-translate').value;
      const targetLang = document.getElementById('country-select').value === 'tr' ? 'tr' : 'hu';
      const response = await fetch('https://libretranslate.de/translate', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          q: text,
          source: 'en',
          target: targetLang,
          format: 'text'
        })
      });
      const data = await response.json();
      document.getElementById('translation-result').textContent = data.translatedText;
    }

    function fetchPhrases() {
      const selected = document.getElementById('country-select').value;
      const phrases = selected === 'tr'
        ? ['Hello - Merhaba', 'Thank you - TeÅŸekkÃ¼r ederim', 'Where is the bathroom? - Tuvalet nerede?']
        : ['Hello - Szia', 'Thank you - KÃ¶szÃ¶nÃ¶m', 'Where is the bathroom? - Hol van a WC?'];

      const list = document.getElementById('phrase-list');
      list.innerHTML = '';
      phrases.forEach(p => {
        const li = document.createElement('li');
        li.textContent = p;
        list.appendChild(li);
      });
    }

        // Default to dark mode on first visit
    if (!localStorage.getItem('theme')) {
        document.body.classList.add('dark');
        localStorage.setItem('theme', 'dark');
    } else if (localStorage.getItem('theme') === 'dark') {
        document.body.classList.add('dark');
    }

    // Optional: update toggle button text
    const updateThemeText = () => {
        const btn = document.querySelector('.theme-toggle');
        if (btn) btn.textContent = document.body.classList.contains('dark') ? 'Light Mode' : 'Dark Mode';
    };
    window.addEventListener('DOMContentLoaded', updateThemeText);
  </script>
</body>
</html>
